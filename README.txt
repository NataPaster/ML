Цель проекта: Необходимо разработать модель машинного обучения, которая поможет персонализировать предложения постоянным клиентам, чтобы увеличить их покупательскую активность.
<p>
Задача: Нужно промаркировать уровень финансовой активности постоянных покупателей. В компании принято выделять два уровня активности: «снизилась», если клиент стал покупать меньше товаров, и «прежний уровень».
 <p>
Нужно собрать данные по клиентам по следующим группам:
<p><li>Признаки, которые описывают коммуникацию сотрудников компании с клиентом.</li>
<li>Признаки, которые описывают продуктовое поведение покупателя. Например, какие товары покупает и как часто.</li>
<li>Признаки, которые описывают покупательское поведение клиента. Например, сколько тратил в магазине.</li>
<li>Признаки, которые описывают поведение покупателя на сайте. Например, как много страниц просматривает и сколько времени проводит на сайте.</li>
<p>
Описание данных: 
<p><li>market_file.csv - содержит данные о поведении покупателя на сайте, о коммуникациях с покупателем и его продуктовом поведении.</li> 
<li>market_money.csv - хранит данные о выручке, которую получает магазин с покупателя, то есть сколько покупатель всего потратил за период взаимодействия с сайтом.</li> 
<li>market_time.csv - Таблица с данными о времени (в минутах), которое покупатель провёл на сайте в течение периода.</li>
<li>money.csv - данными о среднемесячной прибыли продавца за последние 3 месяца: какую прибыль получает магазин от продаж каждому покупателю.</li>
<p>
План работы:
    
Загрузка данных</li>
<li>Предобработка данных</li>
<li>Исследовательский анализ данных</li>
<li>Kорреляционный анализ признаков в датасетах</li>
<li>Подбор мобели в пайплайне</li>
<li>Анализ важности признаков для лучшей модели</li>
<li>Сегментация покупателей по группам</li>
<li>Подведение итогов и выводы</li>

Цель проекта: Необходимо разработать модель машинного обучения, которая поможет персонализировать предложения постоянным клиентам, чтобы увеличить их покупательскую активность.
<p>
Задача: Нужно промаркировать уровень финансовой активности постоянных покупателей. В компании принято выделять два уровня активности: «снизилась», если клиент стал покупать меньше товаров, и «прежний уровень».
 <p>
Нужно собрать данные по клиентам по следующим группам:
<p><li>Признаки, которые описывают коммуникацию сотрудников компании с клиентом.</li>
<li>Признаки, которые описывают продуктовое поведение покупателя. Например, какие товары покупает и как часто.</li>
<li>Признаки, которые описывают покупательское поведение клиента. Например, сколько тратил в магазине.</li>
<li>Признаки, которые описывают поведение покупателя на сайте. Например, как много страниц просматривает и сколько времени проводит на сайте.</li>
<p>
Описание данных: 
<p><li>market_file.csv - содержит данные о поведении покупателя на сайте, о коммуникациях с покупателем и его продуктовом поведении.</li> 
<li>market_money.csv - хранит данные о выручке, которую получает магазин с покупателя, то есть сколько покупатель всего потратил за период взаимодействия с сайтом.</li> 
<li>market_time.csv - Таблица с данными о времени (в минутах), которое покупатель провёл на сайте в течение периода.</li>
<li>money.csv - данными о среднемесячной прибыли продавца за последние 3 месяца: какую прибыль получает магазин от продаж каждому покупателю.</li>
<p>
План работы:
    
<li>Загрузка данных</li>
<li>Предобработка данных</li>
<li>Исследовательский анализ данных</li>
<li>Kорреляционный анализ признаков в датасетах</li>
<li>Подбор мобели в пайплайне</li>
<li>Анализ важности признаков для лучшей модели</li>
<li>Сегментация покупателей по группам</li>
<li>Подведение итогов и выводы</li>

Предварительная оценка загруженных данных показала, что данные во всех таблицах полные, консистентные. Пропуски отсутствуют, тип данных корректный за исключением колонки Прибыль в таблице df_money. Названия столбцов в таблицах по условию задачи не меняла.
Данные пригодны для дальнейшего исследования.
<br>
В рамках предобработки данных в таблицах были удалены явные и неявные дубликаты. Пропусков в данных нет.
<br>
<b>Результаты исследовательского анализа:</b>

Выводы:

В данных df_market_file отсутствуют выбросы, за исключением признака "Акционные_покупки". Исключать этот выброс не стоит, т.к. предполагается, что акции были настолько выгодны в моменте, что покупатели сосредоточились только на них. 

---
▌ 1. Маркет\_актив\_6\_мес

Показатель характеризуется средним разбросом значений вокруг среднего, с небольшой долей экстремальных значений (6.6).

---
▌ 2. Маркет\_актив\_тек\_мес

Практически однородные значения сосредоточены вблизи среднего, стандартное отклонение низкое, вариация небольшая.

---
▌ 3. Длительность

Значительные колебания значений, широкий диапазон показывает сильную дисперсию длительности активности пользователей.

---
▌ 4. Акционные\_покупки

Низкий средний уровень участия в акциях, сильное расхождение среди отдельных клиентов (есть нулевые значения и высокие до 0.99).

---
▌ 5. Средний\_просмотр\_категорий\_за\_визит

Небольшое количество просматриваемых категорий за визит, среднее около 3-х категорий.

---
▌ 6. Неоплаченные\_продукты\_штук\_квартал

Много брошенных товаров в корзине (среднее 2.8 продукта); сильные различия в поведении клиентов, некоторые оставляют до 10 товаров.

---
▌ 7. Ошибка\_сервиса

Среднечастые сбои сервиса, сильно варьируются от клиента к клиенту.

---
▌ 8. Страниц\_за\_визит

Средняя глубина просмотров составляет примерно 8 страниц, большой разброс значений демонстрирует разнообразие поведения пользователей.

---
В данных df_market_money обнаружен единичный выброс, который позже будет удален при необходимости.

---
Категориальные данные:

<li>Доля стабильной покупательской активности на 30% больше чем доля покупателей со сниженной покупательской активностью<li>
<li>1/3 покупателей пользуется подпиской "премиум"</li>
<li>50% покупателей дали получают рекламные материалы с и[ согласия</li>
<li>Среди популярных категорий товаров чаще покупают товары для детей (25%), на втором месте Домашний тестиль(19%). Остальные покупки в пределах популярных категорий распределены в диапазоне 14-17% каждый.</li>
<br>
В целом покупательсткая активность снижается.
<br>

<b>Основные наблюдения и заключения по результатам корреляционного анализа:</b>

▌ Основные зависимости:

- Покупательская активность положительно связана с такими показателями, как количество страниц за визит ($ r = 0.747331 ),минутнасайте( r = 0.538647 ),среднийпросмотркатегорийзавизит( r = 0.539607 $). Это значит, что активные покупатели проводят больше времени на сайте и просматривают большее число товаров.
- Между типом сервиса и покупательской активностью связь слабая ($ r = 0.129940 $).
- Показатели типа "маркетинговая активность за полгода" ($ r = 0.544831 )и"акционныепокупки"( r = 0.506276 $) также имеют положительную зависимость с покупательской активностью, подчеркивая влияние маркетинговых мероприятий на поведение пользователей.
- Выручка текущего месяца слабо связана с покупательской активностью ($ r = 0.197213 $), что может говорить о влиянии факторов помимо активности самих клиентов.

▌ Покупательская активность

Показатель покупательской активности демонстрирует уровень вовлеченности клиентов в процесс покупок. Высокое значение коэффициента корреляции (𝑟=0.506) с акционными покупками показывает сильную связь между активностью покупателя и участием в акциях. Это означает, что активные покупатели чаще участвуют в специальных предложениях и скидочных программах.

▌ Тип сервиса

Коэффициент корреляции типа сервиса с покупательской активностью равен 0.03, что свидетельствует о слабой связи между типом предоставляемого сервиса и уровнем активности клиента. Однако существует умеренная положительная связь (𝑟=0.185) с количеством просматриваемых категорий товаров за визит, что говорит о влиянии качества обслуживания на глубину изучения ассортимента клиентами.

▌ Разрешить сообщать

Данный показатель отражает согласие пользователя получать уведомления от сервиса. Несмотря на относительно низкий коэффициент корреляции (𝑟=0.01), эта переменная имеет положительное влияние на поведение потребителей. Чем больше клиент взаимодействует с сервисами уведомлений, тем выше вероятность совершения покупки.

▌ Длительность

Отсутствие значимых корреляций длительности пребывания на сервисе с остальными показателями подтверждает гипотезу о незначительном влиянии продолжительности сессии на ключевые метрики эффективности.

▌ Акционные покупки

Наиболее значимая корреляционная зависимость наблюдается между показателем "акционные покупки" и покупательской активностью (𝑟=1). Это подчеркивает важность проведения акций и скидок для повышения уровня продаж и привлечения новых клиентов.

▌ Среднее количество просмотров категорий за визит

Корреляционный коэффициент между средним числом просмотренных категорий и выручкой текущего месяца составляет 0.09. Хотя связь достаточно низкая, она все же указывает на потенциальную выгоду увеличения глубины просмотра ассортимента для роста доходов.

▌ Страницы за визит

Связь количества страниц, открытых одним клиентом за визит, с покупательской активностью также довольно слаба (𝑟=0.35).

▌ Выручка текущего месяца

Самый высокий коэффициент корреляции с доходами зафиксирован у показателя среднего числа просмотренных категорий (𝑟=0.237). Этот факт подтверждает необходимость расширения каталога продукции и улучшения навигации сайта для стимулирования покупок.

▌ Минуты на сайте

Количество минут, проведенных пользователем на сайте, слабо связано с потребительскими предпочтениями и поведением (𝑟=0.204). Тем не менее, продолжительность визита положительно влияет на среднюю стоимость заказа и общий объем заказов.

▌ Выводы

Анализ корреляционной матрицы позволяет сделать вывод о сильной зависимости покупательской активности от участия в акциях и наличия популярных категорий товаров.

▌ Важные моменты:

- Многие показатели ("страницы за визит", "минуты на сайте") сильно связаны друг с другом, показывая общую тенденцию активного поведения пользователей на ресурсе.
- Ошибки сервиса оказывают минимальное влияние на потребительские характеристики ($ r < 0.224154 $).

Таким образом, матрица подчеркивает важность взаимодействия потребителей с сайтом, влияния акций и маркетинга на покупательскую активность, а также относительное отсутствие связи типов услуг и общей активности пользователей.

<br>
<b>Разработка и обучение модели:</b>
Подготовка данных осуществлялась с применением ColumnTransformer. Разработап пайплайн, где количественные и категориальные признаки обработаны раздельно. Для кодирования категориальных признаков использовались два кодировщика, для масштабирования количественных — два скейлера.
Обучены четыре модели: KNeighborsClassifier(), DecisionTreeClassifier(), LogisticRegression() и  SVC()с подбором  гиперпараметров. 
<br>
Лучшая модель и её параметры:

LogisticRegression(C=10, max_iter=1000, penalty='l1', random_state=42, solver='liblinear'))])
Метрика лучшей модели на кросс-валидации 0.8645473401054938
<br>
<b> Оценка важности признаков:</b>
Важные признаки:
<li> Акционные_покупки: 0.0556</li>
<li> Минуты_на сайте_тек.мес: 0.0535</li>
<li> Разрешить сообщать_нет: 0.0180</li>
<li> Популярная_категория_косметика и аксессуары: 0.0082</li>

<br>
<b>Cегментация покупателей.</b>  
<br>
Сравнительная характеристика сегментов покупателей

Рассмотрим ключевые показатели каждого сегмента и проведем их сравнение.

1. Доля снизившейся активности

СЕГМЕНТ 0: 80.1% — самый высокий показатель снижения активности среди всех сегментов.
СЕГМЕНТ 1: 21.9% — минимальный показатель среди остальных сегментов.
СЕГМЕНТ 2: 53.3% — промежуточный уровень активности.
СЕГМЕНТ 3: 31.6% — второй по величине показатель снижения активности.

Анализ: Наиболее критичен сегмент 0, где почти весь клиентский пул перестал проявлять активность. Для восстановления интереса необходима активная работа с клиентами этого сегмента.


2. Прибыльность

СЕГМЕНТ 0: 3.86 — самая низкая прибыльность.
СЕГМЕНТ 1: 3.93 — умеренная прибыльность.
СЕГМЕНТ 2: 4.15 — максимальная прибыльность среди всех сегментов.
СЕГМЕНТ 3: 4.06 — также достаточно высок показатель прибыли.

Анализ: Хотя клиенты сегмента 0 показывают низкую активность, их прибыльность остается удовлетворительной. Однако потенциал роста очевидно имеется в сегментах 1 и 3.


3. Выручка

СЕГМЕНТ 0: 5249 — близкий к среднему уровень выручки.
СЕГМЕНТ 1: 4935 — немного ниже среднего показателя.
СЕГМЕНТ 2: 6301 — самый высокий уровень выручки.
СЕГМЕНТ 3: 4912 — второй снизу показатель.

Анализ: Клиенты сегмента 2 приносят самую большую выручку, что является положительным фактором для фокусировки маркетинга и предложений на этом сегменте.


4. Среднее время на сайте

СЕГМЕНТ 0: 7.6 мин — умеренное время посещения сайта.
СЕГМЕНТ 1: 15.0 мин — самое длительное пребывание на сайте.
СЕГМЕНТ 2: 7.8 мин — чуть выше среднего времени.
СЕГМЕНТ 3: 0.7 мин — минимальное время просмотра страниц.

Анализ: Длительность сессии пользователей в сегменте 1 значительно превышает остальные группы, что говорит о заинтересованности клиентов и возможности конвертации большего числа визитов в покупку.


5. Количество неоплаченных товаров в корзине

СЕГМЕНТ 0: 3.6 товара — сравнительно много брошенных товаров.
СЕГМЕНТ 1: 2.3 товара — лучший показатель среди всех групп.
СЕГМЕНТ 2: 3.8 товара — наибольший показатель неоплаченных позиций.
СЕГМЕНТ 3: 2.5 товара — хороший показатель, близко к сегменту 1.

Анализ: Важно минимизировать проблему брошенной корзины в сегментах 0 и 2, поскольку там фиксируется наибольшее количество незавершённых транзакций.


6. Доля акционных покупок

СЕГМЕНТ 0: 94.3% — абсолютное лидерство по доле покупок по акции.
СЕГМЕНТ 1: 21.4% — минимально зависимы от скидок.
СЕГМЕНТ 2: 25.1% — умеренная зависимость от акций.
СЕГМЕНТ 3: 23.4% — похож на сегмент 2 по данному показателю.

Анализ: Основная масса клиентов сегмента 0 покупает исключительно в рамках специальных предложений, что ограничивает рост выручки вне акций.


7. Отказ от коммуникации

СЕГМЕНТ 0: 28.3% — приемлемый уровень отказов от контактов.
СЕГМЕНТ 1: 27.7% — аналогично первому сегменту.
СЕГМЕНТ 2: 22.0% — наилучший показатель согласия на контакт.
СЕГМЕНТ 3: 25.2% — стабильный уровень откликов.

Анализ: Относительно низкие показатели отказов позволяют проводить успешные рекламные кампании и взаимодействие с клиентами большинства сегментов.


Итоговые рекомендации

Исходя из представленного анализа, рекомендуется следующее распределение ресурсов и действий:

СЕГМЕНТ 0: Необходимо вернуть доверие и повысить лояльность клиентов, восстановить активность путем персонализированных предложений и информирования о новых продуктах.
СЕГМЕНТ 1: Повышение объема заказов за счёт увеличения частоты повторных покупок, возможно, введение бонусных программ лояльности.
СЕГМЕНТ 2: Фокусировка на поддержании высоких показателей прибыли и дальнейшему росту доходов путём расширения ассортимента и предложению сопутствующих товаров.
СЕГМЕНТ 3: Увеличение длительности сессий и повышение доли оплаченных корзин через улучшение юзабилити сайта и упрощение процесса оплаты.